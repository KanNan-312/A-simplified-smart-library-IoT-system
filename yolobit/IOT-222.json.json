{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"x-0iqxqKOD/dr04cw4I#\">a</variable><variable id=\"+bO`l|LBEk^Q`x0:vW){\">lst</variable><variable id=\"_lZI+JW-FkOT@}H3)I=H\">cmd</variable><variable id=\"UQNSi/EzKwE4Dz^zI__m\">payload</variable></variables><block type=\"yolobit_events_timer\" id=\"1K:QCmO21XuTQ+%seS])\" x=\"1062\" y=\"-688\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"%9@BD-d=*I5P6!rnuTMW\"><field name=\"NUM\">2</field></shadow></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\":L7NWnDrNT%akuM/UhJu\"><field name=\"VAR\" id=\"x-0iqxqKOD/dr04cw4I#\">a</field><value name=\"VALUE\"><block type=\"yolobit_device_read_terminal\" id=\"GVdr.YPDw,R`ZEA?5F1r\"></block></value><next><block type=\"controls_if\" id=\"{fNoApt5nkI5Bu$d!bpJ\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"pvC?y%9ML@o/ovzzm[wm\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"text_length\" id=\"/xed.;KixE)e_khBy.ps\"><value name=\"VALUE\"><shadow type=\"text\" id=\"~Cr!C57n}U*b7[H2X[o5\"><field name=\"TEXT\">abc</field></shadow><block type=\"variables_get\" id=\"vIr+.tC!!+T{BV#1j;pb\"><field name=\"VAR\" id=\"x-0iqxqKOD/dr04cw4I#\">a</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"q6*|ZY[VOlSx6O}2EQ4#\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"30[@I-V2VGPllWxF!_+F\"><field name=\"VAR\" id=\"+bO`l|LBEk^Q`x0:vW){\">lst</field><value name=\"VALUE\"><block type=\"lists_split\" id=\"M^^tYyJ*}kHC.dUrCP,(\"><mutation mode=\"SPLIT\"></mutation><field name=\"MODE\">SPLIT</field><value name=\"INPUT\"><block type=\"variables_get\" id=\"sv,FX#(~{(t?wSOR@CS9\"><field name=\"VAR\" id=\"x-0iqxqKOD/dr04cw4I#\">a</field></block></value><value name=\"DELIM\"><shadow type=\"text\" id=\"X4XkdXe4}ls@ZpL[ELu)\"><field name=\"TEXT\">:</field></shadow></value></block></value><next><block type=\"variables_set\" id=\"cJ!Z9u]98TaPNvorpkJB\"><field name=\"VAR\" id=\"_lZI+JW-FkOT@}H3)I=H\">cmd</field><value name=\"VALUE\"><block type=\"lists_getIndex\" id=\":AR.(Mjw}nKdZDY6%V|@\"><mutation statement=\"false\" at=\"false\"></mutation><field name=\"MODE\">GET</field><field name=\"WHERE\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"j9oyjMfI|^h3{g%s1=h*\"><field name=\"VAR\" id=\"+bO`l|LBEk^Q`x0:vW){\">lst</field></block></value></block></value><next><block type=\"variables_set\" id=\"PtxLDQC6XV;.oI?hHBp_\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field><value name=\"VALUE\"><block type=\"lists_getIndex\" id=\"SVtz9M$U~Dvul_ot1P|1\"><mutation statement=\"false\" at=\"false\"></mutation><field name=\"MODE\">GET</field><field name=\"WHERE\">LAST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"6#j|XUt0!YA2QwqpdxV3\"><field name=\"VAR\" id=\"+bO`l|LBEk^Q`x0:vW){\">lst</field></block></value></block></value><next><block type=\"controls_if\" id=\"NdU7`baY!9vI0tMe82LG\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"Wl$v*n?fs?.|J/8ScW`%\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"W`p}f{$TGRm[kb!1Q%9:\"><field name=\"VAR\" id=\"_lZI+JW-FkOT@}H3)I=H\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"V~ic7^ccyiy$dG#*30jP\"><field name=\"TEXT\">L</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"c6@.##x_htv{Ptb*UQTy\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\")R2`2sY,FjP_=urz;azG\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"ghU?)}yl7u:ArAduK??P\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field></block></value><value name=\"B\"><block type=\"text\" id=\"_E!WK1OkVK)w`A0h+%.:\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"U^poP#AO!Fxz`5W4F$:c\"><field name=\"port\">pin1</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"FQ(`]GiIvqa8qSHS77pM\"><field name=\"COLOUR\">#000000</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"NZQsm((eUDz8);bU3pQ;\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"CS]+gwVCYdrZD[xx[7Cc\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"(U/%!YpDfo,zf}u^M,Dl\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field></block></value><value name=\"B\"><block type=\"text\" id=\"pGI)9vN}6hZ=jFY}s*xq\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"@g_wK8,uY;)!wF0Dm6n0\"><field name=\"port\">pin1</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"Rq!z,pY5roQImDYLDHBJ\"><field name=\"COLOUR\">#ffffff</field></shadow></value></block></statement></block></statement></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"6Yt^q.B#IeA?1#4Cf:7@\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"7O:)%$e7fM5uY3myT~1{\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"f.nckJ,lT}@M^HYk9OH4\"><field name=\"VAR\" id=\"_lZI+JW-FkOT@}H3)I=H\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"kZSGt.2hV7:|RfG_ugBB\"><field name=\"TEXT\">F</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"wl-L-#tQposJjI9g4=l}\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"sSXz:W2;@)]!%defN#_G\"><field name=\"NUM\">70</field></shadow><block type=\"math_tonum\" id=\"S$I%4hOq9Xy$82UW}@3|\"><value name=\"A\"><block type=\"variables_get\" id=\"6Sig5F?Q2~p48NAPH#%X\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field></block></value></block></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"LX-xg^?CTya7Z%-g(F7.\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"~X]u98Z@.1nY?=oH3W[Q\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Hl6#9nSL.+0_]cXl*I9n\"><field name=\"VAR\" id=\"_lZI+JW-FkOT@}H3)I=H\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"%See}oK9bQTfI@6VF|V+\"><field name=\"TEXT\">D</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"|B__SRKsn]q[Rg@=5OQ)\"><value name=\"string\"><shadow type=\"text\" id=\"e%uQ.YSGY]|j5ZACIAR`\"><field name=\"TEXT\">Hello</field></shadow><block type=\"variables_get\" id=\"61@Sf|{v1{2^|u~P(r#5\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"k2vg$mbrpGkUub2l2o?J\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"cFL?/az/,tQ%hH-4wi,0\"><field name=\"NUM\">0</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"a7S?DC3C]]WOj?M@}#.R\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"0)ldez:.H~T|6y1EUfO?\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"rusj}]fm4iT2Zh76ngbj\"><field name=\"VAR\" id=\"_lZI+JW-FkOT@}H3)I=H\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"wqdOTA(0lqxCcwzE@uWJ\"><field name=\"TEXT\">R</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"2HbTFan=)c-):8gBe()7\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"Sp(6nbn#g``8IOdA%Ygz\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"j9v)0K;gLv~(J~MEFIeU\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field></block></value><value name=\"B\"><block type=\"text\" id=\"VqJR-0,aZ%TSY_eXa6AW\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_relay\" id=\"fD9)ybAaksp}#qz1EH$R\"><field name=\"state\">0</field><field name=\"NAME\">pin14</field></block></statement><statement name=\"ELSE\"><block type=\"controls_if\" id=\"U--ExD}{_D~:P@pO;2$m\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"Ah8QD.PBq!gQYnhkKNru\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\".7%V/r4O$iHzRYdFOlkS\"><field name=\"VAR\" id=\"UQNSi/EzKwE4Dz^zI__m\">payload</field></block></value><value name=\"B\"><block type=\"text\" id=\"95AYXf*_)SQ8E5(q$BVH\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_relay\" id=\".5s0LYUcco~hE-rEnyK.\"><field name=\"state\">1</field><field name=\"NAME\">pin14</field></block></statement></block></statement></block></statement></block></statement></block></statement></block></statement></block></next></block></next></block></next></block></statement></block></next></block></statement></block><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"312\" y=\"-587\"><statement name=\"ONSTART\"><block type=\"yolobit_basic_scroll_text\" id=\"M_jw)J}GZafhCV2;F.XI\"><value name=\"message\"><shadow type=\"text\" id=\".%%7Lz]c`h4bt+8IA_M,\"><field name=\"TEXT\">OK</field></shadow></value><next><block type=\"aiot_lcd1602_backlight\" id=\"vYd?.`!}]OLaH.=EB%7`\"><field name=\"action\">on</field></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_events_run\" id=\"60KfRm`Hywgj.+gR)Xa7\"><next><block type=\"yolobit_basic_sleep\" id=\"L3LbhL!R8in[R1[XA[(Q\"><value name=\"duration\"><shadow type=\"math_number\" id=\"_O)Y~YH5+hK/rH)(?rg1\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"6+`}ncj|~z{a^D{Z{*?@\" x=\"163\" y=\"-387\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"+6gHY.4YTPAG!73t.0)q\"><field name=\"NUM\">30</field></shadow></value><statement name=\"ACTION\"><block type=\"xbot_serial_write_string\" id=\";tFxyz=G1~[NyWjpJQvJ\"><value name=\"string\"><shadow type=\"text\" id=\"%p}{7PwEkNnf=HCwvNK_\"><field name=\"TEXT\">01:T:</field></shadow><block type=\"text_join\" id=\"$*qkb7_tA$eV_Ooy,;G_\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text_join\" id=\"oWKu*0V95;-]-,]94C%e\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"h1:~b;$BIB,G![!b|03X\"><field name=\"TEXT\">!01:T:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"p`ZTMF^OtYy:7?r3c5?U\"><field name=\"DATA\">TEMP</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\"?-G}7^4vW:!c`3ijt;*P\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"0Cm^tV4UM:?#hz5O^/M=\"><value name=\"string\"><shadow type=\"text\" id=\"%p}{7PwEkNnf=HCwvNK_\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"i`:P`et(S3b^9PA:zQHi\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text_join\" id=\"7cNuFcm,:E88DMYG0cq|\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\";DDm~+CS~GjhgbjX_cbd\"><field name=\"TEXT\">!02:H:</field></block></value><value name=\"ADD1\"><block type=\"aiot_dht_read\" id=\"1p7Px$^2[DeI{EHzB3rd\"><field name=\"DATA\">HUMID</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\"!#!xh2@Ep)G=}iB}h9iE\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement></block></xml>","python":"from event_manager import *\nimport sys\nimport uselect\nfrom yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom aiot_rgbled import RGBLed\nfrom aiot_lcd1602 import LCD1602\nimport time\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\n\nevent_manager.reset()\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\ntiny_rgb = RGBLed(pin1.pin, 4)\n\naiot_lcd1602 = LCD1602()\n\ndef on_event_timer_callback_K_Q_C_m_O():\n  global a, lst, cmd, payload, list2\n  a = read_terminal_input()\n  if len(a) > 0:\n    lst = a.split(':')\n    cmd = lst[0]\n    payload = lst[-1]\n    if cmd == 'L':\n      if payload == '0':\n        tiny_rgb.show(0, hex_to_rgb('#000000'))\n      else:\n        if payload == '1':\n          tiny_rgb.show(0, hex_to_rgb('#ffffff'))\n    else:\n      if cmd == 'F':\n        pin2.write_analog(round(translate((int(payload)), 0, 100, 0, 1023)))\n      else:\n        if cmd == 'D':\n          aiot_lcd1602.move_to(0, 0)\n          aiot_lcd1602.putstr(payload)\n        else:\n          if cmd == 'R':\n            if payload == '0':\n              pin14.write_digital(0)\n            else:\n              if payload == '1':\n                pin14.write_digital(1)\n\nevent_manager.add_timer_event(2000, on_event_timer_callback_K_Q_C_m_O)\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\ndef on_event_timer_callback_n_c_j_z_a():\n  global a, lst, cmd, payload, list2\n  print((str('!01:T:' + str(aiot_dht20.dht20_temperature())) + '#'), end =' ')\n  print((str('!02:H:' + str(aiot_dht20.dht20_humidity())) + '#'), end =' ')\n\nevent_manager.add_timer_event(30000, on_event_timer_callback_n_c_j_z_a)\n\nif True:\n  display.scroll('OK')\n  aiot_lcd1602.backlight_on()\n\nwhile True:\n  event_manager.run()\n  time.sleep_ms(1000)\n","name":"IOT-222","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"}],"device":"yolobit"}